# Инлайн цели в Port Knocker

## Быстрое использование без конфигурационных файлов

Теперь можно задавать цели прямо в командной строке без создания YAML файлов.

## Формат

```bash
port-knocker -t "proto:host:port;proto:host:port;..." [-d delay] [-v]
```

### Параметры:
- `proto` - протокол: `tcp` или `udp`
- `host` - IP адрес или доменное имя
- `port` - номер порта (1-65535)
- `;` - разделитель между целями
- `-d delay` - задержка между пакетами (например: `1s`, `500ms`, `2m`)

## Примеры использования

### Простой порт-кнокинг
```bash
./port-knocker -t "tcp:192.168.1.1:22" -v
```

### Последовательность портов
```bash
./port-knocker -t "tcp:server.com:1000;tcp:server.com:2000;tcp:server.com:3000" -d 1s -v
```

### Смешанные протоколы
```bash
./port-knocker -t "tcp:host:80;udp:host:53;tcp:host:443" -d 500ms -v
```

### Ваша последовательность
```bash
./port-knocker -t "tcp:37.38.39.40:27383;tcp:37.38.39.40:38648;tcp:37.38.39.40:50305" -d 1s -v
```

### С ожиданием соединения
```bash
./port-knocker -t "tcp:host:443" -w -v
```

## Преимущества

✅ **Быстро** - не нужно создавать файлы конфигурации  
✅ **Просто** - всё в одной команде  
✅ **Безопасно** - ничего не сохраняется на диск  
✅ **Гибко** - можно легко менять параметры  

## Валидация

- Проверка формата `proto:host:port`
- Поддержка только `tcp` и `udp` протоколов  
- Проверка диапазона портов (1-65535)
- Валидация формата задержки

## Сравнение с файлом конфигурации

| Инлайн цели | Файл конфигурации |
|-------------|-------------------|
| `./port-knocker -t "tcp:host:22"` | `./port-knocker -c config.yaml` |
| Быстро для простых случаев | Лучше для сложных конфигураций |
| Без сохранения на диск | Можно шифровать |
| Одна задержка для всех | Индивидуальные настройки |
| Нет поддержки gateway | Поддержка gateway |

## Использование с tcpdump

```bash
# В одном терминале - мониторинг
sudo tcpdump -nn dst host 37.38.39.40 and \(port 27383 or port 38648 or port 50305\)

# В другом терминале - port knocking
./port-knocker -t "tcp:37.38.39.40:27383;tcp:37.38.39.40:38648;tcp:37.38.39.40:50305" -d 1s -v
``` 