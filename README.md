# Port Knocker

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ port knocking –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–í–µ—Ä—Å–∏—è**: 1.0.1

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ TCP –∏ UDP –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- ‚úÖ –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ (Linux, Windows)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ **–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤ –≤ –æ—Ç–∫—Ä—ã—Ç—ã–π YAML (–∫–æ–º–∞–Ω–¥–∞ decrypt)**
- ‚úÖ **–ü–∞—Å—Ö–∞–ª–∫–∞ –¥–ª—è –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** üéØ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd port-knocker

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make deps

# –°–æ–±—Ä–∞—Ç—å –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
make build

# –ò–ª–∏ —Å–æ–±—Ä–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
make build-all
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É

```bash
make install
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

```bash
# –° —Ñ–∞–π–ª–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
port-knocker -c config.yaml [-k key.txt] [-v]

# –° –∏–Ω–ª–∞–π–Ω —Ü–µ–ª—è–º–∏
port-knocker -t "tcp:host:port;udp:host:port" [-d delay] [-v]
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `-c, --config` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `-t, --targets` - –ò–Ω–ª–∞–π–Ω —Ü–µ–ª–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `[proto]:[host]:[port];[proto]:[host]:[port]`
- `-d, --delay` - –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1s)
- `-k, --key` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- `-v, --verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
- `-w, --wait-connection` - –ñ–¥–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ª–∏–±–æ `-c` (—Ñ–∞–π–ª), –ª–∏–±–æ `-t` (–∏–Ω–ª–∞–π–Ω —Ü–µ–ª–∏), –Ω–æ –Ω–µ –æ–±–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ò—Å–ø–æ–ª—å–∑—É—è –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–ø—Ü–∏—é --config
port-knocker encrypt -c config.yaml -o config.encrypted -k key.txt

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø—Ü–∏—é -i
port-knocker encrypt -i config.yaml -o config.encrypted -k key.txt
```

### **–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞**

```bash
# –ò—Å–ø–æ–ª—å–∑—É—è –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–ø—Ü–∏—é --config
port-knocker decrypt -c config.encrypted -o config.decrypted.yaml -k key.txt

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø—Ü–∏—é -i
port-knocker decrypt -i config.encrypted -o config.decrypted.yaml -k key.txt
```

- `-c/--config` –∏–ª–∏ `-i/--input` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω -i, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è --config)
- `-o/--output` ‚Äî –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É
- `-k/--key` ‚Äî –ø—É—Ç—å –∫ –∫–ª—é—á—É (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è PORT_KNOCKER_KEY)

**–í–∞–∂–Ω–æ**: –ö–ª—é—á –ª—é–±–æ–π –¥–ª–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è SHA256 –¥–æ 32 –±–∞–π—Ç –¥–ª—è AES-256.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML:

```yaml
targets:
  - host: "192.168.1.100"
    ports: [1000, 2000, 3000]
    protocol: "tcp"
    delay: "1s"
  
  - host: "10.0.0.50"
    ports: [5000, 6000, 7000, 8000]
    protocol: "udp"
    delay: "500ms"
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–µ–ª–∏

- `host` - IP-–∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è —Ü–µ–ª–∏
- `ports` - –ú–∞—Å—Å–∏–≤ –ø–æ—Ä—Ç–æ–≤ –¥–ª—è knocking
- `protocol` - –ü—Ä–æ—Ç–æ–∫–æ–ª: `tcp` –∏–ª–∏ `udp`
- `delay` - –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1s`, `500ms`, `2m`)

## –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞

–ö–ª—é—á –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π –¥–ª–∏–Ω—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è –¥–æ 32 –±–∞–π—Ç):

```bash
# –°–æ–∑–¥–∞—Ç—å –∫–ª—é—á –≤ —Ñ–∞–π–ª–µ (–ª—é–±–∞—è –¥–ª–∏–Ω–∞)
echo "my-secret-password" > key.txt

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
export PORT_KNOCKER_KEY="my-secret-password"

# –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
echo "this-is-a-very-long-password-that-will-be-hashed-to-32-bytes" > key.txt
```

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–ª—é—á–æ–º –∏–∑ —Ñ–∞–π–ª–∞
port-knocker encrypt -c config.yaml -o config.encrypted -k key.txt

# –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–ª—é—á–æ–º –∏–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
export PORT_KNOCKER_KEY="my-secret-password"
port-knocker encrypt -c config.yaml -o config.encrypted
```

### **–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

```bash
# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å –∫–ª—é—á–æ–º –∏–∑ —Ñ–∞–π–ª–∞
port-knocker decrypt -c config.encrypted -o config.decrypted.yaml -k key.txt

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å –∫–ª—é—á–æ–º –∏–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
export PORT_KNOCKER_KEY="my-secret-password"
port-knocker decrypt -c config.encrypted -o config.decrypted.yaml
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –° –∫–ª—é—á–æ–º –∏–∑ —Ñ–∞–π–ª–∞
port-knocker -c config.encrypted -k key.txt -v

# –° –∫–ª—é—á–æ–º –∏–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
export PORT_KNOCKER_KEY="my-secret-key-32-bytes-long!!"
port-knocker -c config.encrypted -v
```

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –∏–Ω–ª–∞–π–Ω —Ü–µ–ª—è–º–∏

```bash
# –ü—Ä–æ—Å—Ç–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å TCP –ø–æ—Ä—Ç–æ–≤
port-knocker -t "tcp:192.168.1.100:1000;tcp:192.168.1.100:2000;tcp:192.168.1.100:3000" -v

# –°–º–µ—à–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
port-knocker -t "tcp:server.com:22;udp:server.com:53;tcp:server.com:80" -d 500ms -v

# –û–¥–∏–Ω–æ—á–Ω—ã–π –ø–æ—Ä—Ç
port-knocker -t "tcp:192.168.1.1:22" -v

# –° –æ–∂–∏–¥–∞–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
port-knocker -t "tcp:192.168.1.100:443" -w -v
```

### –ü—Ä–∏–º–µ—Ä 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

```bash
# –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat > config.yaml << EOF
targets:
  - host: "192.168.1.100"
    ports: [1000, 2000, 3000]
    protocol: "tcp"
    delay: "1s"
EOF

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
port-knocker -c config.yaml -v
```

### –ü—Ä–∏–º–µ—Ä 3: –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å –∫–ª—é—á
echo "my-secret-password" > key.txt

# –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
port-knocker encrypt -c config.yaml -o config.encrypted -k key.txt

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
port-knocker -c config.encrypted -k key.txt -v

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
port-knocker decrypt -c config.encrypted -o config.decrypted.yaml -k key.txt
```

### –ü—Ä–∏–º–µ—Ä 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏

```bash
cat > config.yaml << EOF
targets:
  - host: "server1.example.com"
    ports: [22, 80, 443]
    protocol: "tcp"
    delay: "2s"
  
  - host: "server2.example.com"
    ports: [5000, 6000, 7000, 8000]
    protocol: "udp"
    delay: "500ms"
EOF

port-knocker -c config.yaml -v
```

## üéØ –ü–∞—Å—Ö–∞–ª–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–π—Ç–∏ —Å–∫—Ä—ã—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é! –ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
port-knocker -t "tcp:8.8.8.8:8888" -v
```

–ò –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç! üöÄ

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω—ã–º–∏ –∏ —Å–ª—É—á–∞–π–Ω—ã–º–∏
- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ 600
- –°–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `PORT_KNOCKER_KEY` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∫–ª—é—á–µ–π –≤–º–µ—Å—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## –°–±–æ—Ä–∫–∞

### –î–ª—è Linux

```bash
make build-linux
```

### –î–ª—è Windows

```bash
make build-windows
```

### –î–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

```bash
make build-all
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
make test
```

### –û—á–∏—Å—Ç–∫–∞

```bash
make clean
```

### –°–ø—Ä–∞–≤–∫–∞

```bash
make help
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 